<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¡œì•„ ìƒê¸‰ ìœµí™” ì¬ë£Œ ê³„ì‚°ê¸°</title>
    <style>
        :root {
            --bg-color: #212529;
            --card-bg: #2c3035;
            --primary: #5c7cfa;
            --text-color: #f8f9fa;
            --border-color: #495057;
            --highlight: #ffd43b;
        }
        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .container {
            background-color: var(--card-bg);
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
            width: 100%;
            max-width: 500px;
        }
        h1 {
            text-align: center;
            margin-bottom: 25px;
            font-size: 1.5rem;
            color: var(--primary);
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            font-size: 0.9rem;
        }
        select, input {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background-color: #343a40;
            color: white;
            font-size: 1rem;
            box-sizing: border-box;
        }
        select:focus, input:focus {
            outline: none;
            border-color: var(--primary);
        }
        .btn {
            width: 100%;
            padding: 14px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
            transition: 0.2s;
        }
        .btn:hover {
            filter: brightness(1.1);
        }
        .result-box {
            margin-top: 25px;
            padding: 20px;
            background-color: #343a40;
            border-radius: 12px;
            border: 1px solid var(--border-color);
            display: none; /* ì´ˆê¸°ì—” ìˆ¨ê¹€ */
        }
        .result-title {
            font-size: 1.2rem;
            text-align: center;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 10px;
        }
        .result-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 0.95rem;
        }
        .highlight {
            color: var(--highlight);
            font-weight: bold;
        }
        .sub-text {
            font-size: 0.8rem;
            color: #adb5bd;
            text-align: center;
            margin-top: 15px;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸ› ï¸ ìƒê¸‰ ì•„ë¹„ë„ìŠ¤ ì œì‘ ê³„ì‚°ê¸°</h1>

    <div class="form-group">
        <label>ìƒí™œ ì¢…ë¥˜ ì„ íƒ</label>
        <select id="lifeType" onchange="updateLabels()">
            <option value="foraging">ğŸŒ± ì±„ì§‘ (ë“¤ê½ƒ)</option>
            <option value="logging">ğŸª“ ë²Œëª© (ëª©ì¬)</option>
            <option value="hunting">ğŸ¥© ìˆ˜ë µ (ìƒê³ ê¸°)</option>
        </select>
    </div>

    <div class="form-group">
        <label id="label-t4" class="highlight">ì•„ë¹„ë„ìŠ¤ ë“¤ê½ƒ (4í‹°ì–´)</label>
        <input type="number" id="input-t4" placeholder="ë³´ìœ  ìˆ˜ëŸ‰ ì…ë ¥" min="0">
    </div>

    <div class="form-group">
        <label id="label-rare" style="color:#4dabf7">ìˆ˜ì¤ì€ ë“¤ê½ƒ (3í‹°ì–´ í¬ê·€)</label>
        <input type="number" id="input-rare" placeholder="ë³´ìœ  ìˆ˜ëŸ‰ ì…ë ¥" min="0">
    </div>

    <div class="form-group">
        <label id="label-normal">ë“¤ê½ƒ (3í‹°ì–´ ì¼ë°˜)</label>
        <input type="number" id="input-normal" placeholder="ë³´ìœ  ìˆ˜ëŸ‰ ì…ë ¥" min="0">
    </div>

    <button class="btn" onclick="calculate()">ê³„ì‚°í•˜ê¸°</button>

    <div class="result-box" id="resultArea">
        <div class="result-title">
            ìµœëŒ€ <span class="highlight" id="maxCrafts">0</span>íšŒ ì œì‘ ê°€ëŠ¥
        </div>
        
        <div style="margin-bottom:15px;">
            <label style="color:#adb5bd; border-bottom:1px solid #495057; padding-bottom:5px;">ğŸ“‹ 1ë‹¨ê³„: ì¸ë²¤í† ë¦¬ì— ë‚¨ê¸¸ ì¬ë£Œ</label>
            <div class="result-row">
                <span id="res-keep-normal-name">ì¼ë°˜ ì¬ë£Œ</span>
                <span id="res-keep-normal-val">0ê°œ</span>
            </div>
            <div class="result-row">
                <span id="res-keep-rare-name">í¬ê·€ ì¬ë£Œ</span>
                <span id="res-keep-rare-val">0ê°œ</span>
            </div>
        </div>

        <div style="margin-bottom:15px;">
            <label style="color:#adb5bd; border-bottom:1px solid #495057; padding-bottom:5px;">â™»ï¸ 2ë‹¨ê³„: ê°€ë£¨ë¡œ êµí™˜í•  ì¬ë£Œ</label>
            <div class="result-row">
                <span id="res-conv-normal-name">ë‚¨ì€ ì¼ë°˜ ì¬ë£Œ</span>
                <span class="highlight" id="res-conv-normal-val">0ê°œ</span>
            </div>
            <div class="result-row">
                <span id="res-conv-rare-name">ë‚¨ì€ í¬ê·€ ì¬ë£Œ</span>
                <span class="highlight" id="res-conv-rare-val">0ê°œ</span>
            </div>
        </div>

        <div>
            <label style="color:#adb5bd; border-bottom:1px solid #495057; padding-bottom:5px;">ğŸ›’ 3ë‹¨ê³„: ê°€ë£¨ë¡œ êµ¬ë§¤</label>
            <div class="result-row">
                <span>êµ¬ë§¤í•  4í‹°ì–´ ì¬ë£Œ</span>
                <span class="highlight" id="res-buy-t4">0ê°œ</span>
            </div>
        </div>
    </div>
    
    <div class="sub-text">
        * ê³„ì‚° ë¡œì§: (3í‹°ì–´ ì¼ë°˜â†’0.8ê°€ë£¨), (3í‹°ì–´ í¬ê·€â†’1.6ê°€ë£¨) í™˜ì‚° ê°€ì¹˜ ì ìš©<br>
        * ì‹¤ì œ ê²Œì„ ë‚´ êµí™˜ ë‹¨ìœ„(10ê°œ/100ê°œ)ì— ë”°ë¼ ì†ŒëŸ‰ì˜ ì˜¤ì°¨ê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    </div>
</div>

<script>
    // ì¬ë£Œ ë°ì´í„°
    const labels = {
        foraging: { t4: "ì•„ë¹„ë„ìŠ¤ ë“¤ê½ƒ", rare: "ìˆ˜ì¤ì€ ë“¤ê½ƒ", normal: "ë“¤ê½ƒ" },
        logging: { t4: "ì•„ë¹„ë„ìŠ¤ ëª©ì¬", rare: "ë¶€ë“œëŸ¬ìš´ ëª©ì¬", normal: "ëª©ì¬" },
        hunting: { t4: "ì•„ë¹„ë„ìŠ¤ ë‘íˆ¼í•œ ìƒê³ ê¸°", rare: "ë‹¤ë“¬ì€ ìƒê³ ê¸°", normal: "ë‘íˆ¼í•œ ìƒê³ ê¸°" }
    };

    // ì œì‘ í•„ìš”ëŸ‰
    const REQ = { t4: 43, rare: 59, normal: 112 };
    
    // ê°€ë£¨ í™˜ì‚° ê°€ì¹˜ (1ê°œë‹¹ ê°€ë£¨ ê°€ì¹˜)
    // ì¼ë°˜ 100ê°œ = 80ê°€ë£¨ -> ê°œë‹¹ 0.8
    // í¬ê·€ 50ê°œ = 80ê°€ë£¨ -> ê°œë‹¹ 1.6
    // 4í‹°ì–´ êµ¬ë§¤ë¹„ìš©: 10ê°œ = 100ê°€ë£¨ -> ê°œë‹¹ 10ê°€ë£¨ ì†Œëª¨
    const VAL = { normal: 0.8, rare: 1.6, t4_cost: 10 };

    // 1íšŒ ì œì‘ì‹œ ì†Œëª¨ë˜ëŠ” ì´ 'ê°€ë£¨ ê°€ì¹˜'
    // (43 * 10) + (59 * 1.6) + (112 * 0.8) = 430 + 94.4 + 89.6 = 614
    const COST_PER_CRAFT = (REQ.t4 * VAL.t4_cost) + (REQ.rare * VAL.rare) + (REQ.normal * VAL.normal);

    function updateLabels() {
        const type = document.getElementById('lifeType').value;
        document.getElementById('label-t4').innerText = labels[type].t4 + " (4í‹°ì–´)";
        document.getElementById('label-rare').innerText = labels[type].rare + " (3í‹°ì–´ í¬ê·€)";
        document.getElementById('label-normal').innerText = labels[type].normal + " (3í‹°ì–´ ì¼ë°˜)";
    }

    function calculate() {
        const type = document.getElementById('lifeType').value;
        
        // ì…ë ¥ê°’ ê°€ì ¸ì˜¤ê¸°
        const hasT4 = Number(document.getElementById('input-t4').value) || 0;
        const hasRare = Number(document.getElementById('input-rare').value) || 0;
        const hasNormal = Number(document.getElementById('input-normal').value) || 0;

        // 1. ë³´ìœ  ì¬ë£Œì˜ ì´ ê°€ì¹˜ ê³„ì‚° (ì „ë¶€ ê°€ë£¨ë¡œ ë°”ê¿¨ì„ ë•Œ + ë³´ìœ  T4ì˜ ê°€ì¹˜)
        // ì£¼ì˜: T4ëŠ” ë¶„í•´ê°€ ì•ˆë˜ì§€ë§Œ, ê³„ì‚° í¸ì˜ìƒ ê°€ì¹˜ ì´ëŸ‰ìœ¼ë¡œ ìµœëŒ€ Nì„ êµ¬í•˜ê¸° ìœ„í•¨
        const totalValue = (hasT4 * VAL.t4_cost) + (hasRare * VAL.rare) + (hasNormal * VAL.normal);

        // 2. ì´ë¡ ìƒ ìµœëŒ€ ì œì‘ íšŸìˆ˜
        let maxCrafts = Math.floor(totalValue / COST_PER_CRAFT);

        // 3. í˜„ì‹¤ì  ì œì•½ ì¡°ê±´ í™•ì¸ (ë³‘ëª© í˜„ìƒ ì²´í¬)
        // 4í‹°ì–´ëŠ” ê°€ë£¨ë¡œ ì‚´ ìˆ˜ ìˆì§€ë§Œ, 3í‹°ì–´ëŠ” ë³´ìœ ëŸ‰ ë‚´ì—ì„œ ì¨ì•¼ í•¨ (ì—­êµí™˜ ë¶ˆê°€ ê°€ì •)
        // ì¦‰, ë‚´ê°€ ê°€ì§„ 3í‹°ì–´ ì¼ë°˜/í¬ê·€ ì¬ë£Œê°€ maxCrafts íšŸìˆ˜ë§Œí¼ì€ ë²„í…¨ì¤˜ì•¼ í•¨.
        const limitByNormal = Math.floor(hasNormal / REQ.normal);
        const limitByRare = Math.floor(hasRare / REQ.rare);

        // ìµœì¢… ì œì‘ íšŸìˆ˜ëŠ” [ê°€ì¹˜ê¸°ë°˜ ìµœëŒ€ì¹˜]ì™€ [ë³´ìœ  3í‹°ì–´ í•œê³„ì¹˜] ì¤‘ ì‘ì€ ê°’
        maxCrafts = Math.min(maxCrafts, limitByNormal, limitByRare);

        // 4. ê²°ê³¼ ë„ì¶œ
        const neededNormal = maxCrafts * REQ.normal;
        const neededRare = maxCrafts * REQ.rare;
        const neededT4 = maxCrafts * REQ.t4;

        // ë‚¨ê²¨ì•¼ í•  ê²ƒ
        const keepNormal = neededNormal;
        const keepRare = neededRare;

        // êµí™˜í•  ê²ƒ (ë‚¨ëŠ”ê±°)
        const convertNormal = hasNormal - keepNormal;
        const convertRare = hasRare - keepRare;

        // êµ¬ë§¤í•´ì•¼ í•  T4
        const buyT4 = Math.max(0, neededT4 - hasT4);

        // UI ì¶œë ¥
        document.getElementById('resultArea').style.display = 'block';
        document.getElementById('maxCrafts').innerText = maxCrafts;

        // ì´ë¦„ ì—…ë°ì´íŠ¸
        document.getElementById('res-keep-normal-name').innerText = labels[type].normal + " ìœ ì§€";
        document.getElementById('res-keep-rare-name').innerText = labels[type].rare + " ìœ ì§€";
        document.getElementById('res-conv-normal-name').innerText = "ë‚¨ëŠ” " + labels[type].normal + " êµí™˜";
        document.getElementById('res-conv-rare-name').innerText = "ë‚¨ëŠ” " + labels[type].rare + " êµí™˜";

        // ìˆ˜ì¹˜ ì—…ë°ì´íŠ¸ (ì²œë‹¨ìœ„ ì½¤ë§ˆ)
        document.getElementById('res-keep-normal-val').innerText = keepNormal.toLocaleString() + "ê°œ";
        document.getElementById('res-keep-rare-val').innerText = keepRare.toLocaleString() + "ê°œ";
        document.getElementById('res-conv-normal-val').innerText = convertNormal.toLocaleString() + "ê°œ";
        document.getElementById('res-conv-rare-val').innerText = convertRare.toLocaleString() + "ê°œ";
        
        document.getElementById('res-buy-t4').innerText = labels[type].t4 + " " + buyT4.toLocaleString() + "ê°œ êµ¬ë§¤";
    }

    // ì´ˆê¸° ì‹¤í–‰
    updateLabels();
</script>

</body>
</html>
